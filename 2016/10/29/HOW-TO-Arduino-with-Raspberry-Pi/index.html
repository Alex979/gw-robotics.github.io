<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="An organization at The George Washington University.">
    

    <!--Author-->
    
        <meta name="author" content="Nam Tran">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="HOW-TO: Arduino with Raspberry Pi"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="An organization at The George Washington University." />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="GW Robotics"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>HOW-TO: Arduino with Raspberry Pi - GW Robotics</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about/index.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/design-cad/index.html">
                    Design/ CAD
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/mechanical/index.html">
                    Mechanical
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/control-systems/index.html">
                    Control Systems
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact/index.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2016/10/29/HOW-TO-Arduino-with-Raspberry-Pi/">
                HOW-TO: Arduino with Raspberry Pi
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-10-29</span>
            
            <a href="#disqus_thread" class="comments">Comments</a>
            
                <span class="category">
                    <a href="/categories/control-systems/">control-systems</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>The 2017 robot will be interacting between the Arduino (for sensor reading and PWM output) and the Raspberry Pi through a Python module called <a href="http://nanpy.github.io/" target="_blank" rel="external">Nanpy</a>. The purpose of this how-to is for basic setup and usage that may not be completely obvious from Nanpy’s official documentation. We will be using repositories from the GW Robotics organisation as a way to standardise everyone’s code bases.</p>
<h2 id="Arduino-Setup"><a href="#Arduino-Setup" class="headerlink" title="Arduino Setup"></a>Arduino Setup</h2><p><strong>Please note, this is only necessary if the Arduino does not already have the Nanpy firmware compiled on it.</strong></p>
<p>First, you will need to clone the <a href="https://github.com/GW-Robotics/nanpy-firmware" target="_blank" rel="external">Nanpy Firmware repository</a> from Github. Then you will go into the repository and run the configure.sh script. The commands is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/GW-Robotics/nanpy-firmware.git</div><div class="line">cd nanpy-firmware</div><div class="line">./configure.sh</div></pre></td></tr></table></figure>
<p>This will create a cfg.h file that you can edit. For an initial setup, I changed the value of USE_Servo to 1, as this will more than likely be used on the robot. The others can be changed and recompiled to the Arduino as they are needed.</p>
<p>After that is completed, copy the /Nanpy/ directory from the repository into your Arduino sketchbook. In most cases, that is the /Arduino/ folder in your Documents directory. After that is done, open “Nanpy.ino” in your Arduino IDE. We are using an Arduino Mega 2560, so set your board to that. Set your port to whatever COM port the Arduino board is found. Verify and compile, and you should be all set to go.</p>
<h2 id="Raspberry-Pi-Setup"><a href="#Raspberry-Pi-Setup" class="headerlink" title="Raspberry Pi Setup"></a>Raspberry Pi Setup</h2><p><strong>Please note, you should already have Python and Python-Pip installed on your computer.</strong></p>
<p>This honestly is much easier than setting up the Arduino. All you have to do is run the following command to install the Python module and you are ready to program:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install nanpy</div></pre></td></tr></table></figure>
<p>The only thing that could go wrong is if your Python installation did not come with Pyserial. You can check your installed modules using this command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip list</div></pre></td></tr></table></figure>
<p>If that is the case, run this command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install pyserial</div></pre></td></tr></table></figure>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>I am going to just paste in the test program I ran to make sure things are working. For the most part, all Arduino functions will work with Nanpy. This makes the usage explanation really easy, though I will note a few interesting points to remember.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">from</span> nanpy <span class="keyword">import</span> ArduinoApi, SerialManager</div><div class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Establishing connections..."</span></div><div class="line">connection = SerialManager(device = <span class="string">'/dev/ttyACM0'</span>)</div><div class="line">a = ArduinoApi(connection = connection)</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Settting up output pin..."</span></div><div class="line">a.pinMode(<span class="number">13</span>, a.OUTPUT)</div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Loop time!"</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">      a.digitalWrite(<span class="number">13</span>, a.HIGH)</div><div class="line">      sleep(<span class="number">0.5</span>)</div><div class="line">      a.digitalWrite(<span class="number">13</span>, a.LOW)</div><div class="line">      sleep(<span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<p>The first important thing to note is the imports. You will need to at the very least import ArduinoApi and SerialManager from Nanpy. These are so that Python can run Arduino functions and to connect to the Arduino, respectively. The sleep function should also be imported, as it is used rather than the Arduino delay() function.</p>
<p>The next important thing to note is that all the Arduino loop code is in an infinite while-loop. This is because Nanpy does not provide a loop() function, but this does the same thing. In the future, we need to figure out how to loop that separate from the rest of the code.</p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/how-to/">#how-to</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2016/12/21/SEAS-Innovation-Challenge-Start/">SEAS Innovation Challenge</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/11/08/HOW-TO-OpenCV-Installation-Windows/">HOW-TO: OpenCV Installati</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/11/05/Software-Meeting-11-5-16-Notes/">Software Meeting 11/5/16 </a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/10/29/Design-Meeting-10-29-2016-Notes/">Design Meeting 10/29/2016</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/meeting/">meeting</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/mechanical/">mechanical</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/meeting/control-systems/">control-systems</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/design-cad/">design-cad</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/GW-Robotics">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:robotics@gwu.edu">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Nam Tran 2016. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>